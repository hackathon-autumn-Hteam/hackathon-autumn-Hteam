{% extends 'base.html' %}

<!-- prettier-ignore -->
{% block title %}
チャットルーム | {{channel.channel_name}}
{% endblock %}

<!-- prettier-ignore -->
{% block body %}
<div class="main-container">
  <!-- TODO(はるか): フレックスボックスを使い、左右に隙間を入れて並べる -->
  <div id="chat-header">
    <div id="channel-detail">
      <p>{{channel.channel_name}}</p>
      <p>{{channel.description}}</p>
    </div>

    <div id="channel-actions">
      <!-- チャンネルを作成したユーザーのみチャンネルの編集・削除ができる -->
      {% if user_id == channel.user_id %}
      <button id="update-channel-button" class="icon-button" aria-label="編集">
        <ion-icon name="create"></ion-icon>
      </button>
      <button id="delete-channel-button" class="icon-button" aria-label="削除">
        <ion-icon name="trash"></ion-icon>
      </button>
      {% endif %}

      <!-- チャンネルの編集用のモーダルを取り込む -->
      {% include 'modal/update-channel.html' %}

      <!-- チャンネルの削除用のモーダルを取り込む -->
      {% include'modal/delete-channel.html' %}
    </div>
  </div>

  <div id="chat-body">
    <!-- メッセージの一覧 -->

    <!-- メッセージ作成フォーム -->
    <div id="create-message-form">
      <form
        action="{{ url_for('create_message', channel_id=channel.channel_id) }}"
        method="POST"
      >
        <textarea
          id="message_text"
          name="message_text"
          rows="5"
          placeholder="メッセージを入力してください。"
          required
        ></textarea>
        <button class="base-button green-button">送信</button>
      </form>
    </div>
  </div>
</div>
{% endblock %}

<!-- prettier-ignore -->
{% block script %}
<!-- チャンネルの編集用のモーダルを制御するスクリプトを読み込む -->
<script
  src="{{url_for('static',filename='js/channels/update-channel.js')}}"
  type="text/javascript"
></script>

<!-- チャンネルの削除のモーダルを制御するスクリプトを読み込む -->
<script
  src="{{url_for('static',filename='js/channels/delete-channel.js')}}"
  type="text/javascript"
></script>

<!-- メッセージの編集のモーダルを制御するスクリプトを読み込む -->
<script
  src="{{url_for('static',filename='js/messages/update-message.js')}}"
  type="text/javascript"
></script>
{% endblock %}
